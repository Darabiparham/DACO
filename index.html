<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <meta name="theme-color" content="#5D5CDE">
    <meta name="background-color" content="#FFFFFF">
    <meta name="msapplication-TileColor" content="#5D5CDE">
    <meta name="msapplication-navbutton-color" content="#5D5CDE">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- SEO Meta Tags -->
    <title>DACO Storymaker Pro - Professional Instagram Story Creator | داکو استوری میکر پرو</title>
    <meta name="description" content="Create stunning Instagram stories with DACO Storymaker Pro. Add text overlays, customize fonts, colors, and effects for perfect 9:16 format stories. ساخت استوری های حرفه ای اینستاگرام با امکانات کامل">
    <meta name="keywords" content="instagram stories, story maker, text overlay, social media, design tool, story creator, استوری اینستاگرام, ساخت استوری, طراحی استوری, داکو استوری میکر">
    <meta name="author" content="DACO Storymaker Pro Team">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <meta name="language" content="Persian">
    <meta name="geo.region" content="IR">
    <meta name="geo.country" content="Iran">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://dacostorymaker.app/">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:locale" content="fa_IR">
    <meta property="og:type" content="website">
    <meta property="og:title" content="DACO Storymaker Pro - Professional Story Creator">
    <meta property="og:description" content="Create stunning Instagram stories with professional text overlays and effects. ساخت استوری های حرفه ای اینستاگرام">
    <meta property="og:url" content="https://dacostorymaker.app/">
    <meta property="og:site_name" content="DACO Storymaker Pro">
    <meta property="og:image" content="https://dacostorymaker.app/images/og-image-1200x630.png">
    <meta property="og:image:secure_url" content="https://dacostorymaker.app/images/og-image-1200x630.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="DACO Storymaker Pro Interface">
    <meta property="og:updated_time" content="2024-01-15T10:00:00Z">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@dacostorymaker">
    <meta name="twitter:creator" content="@dacostorymaker">
    <meta name="twitter:title" content="DACO Storymaker Pro - Professional Story Creator">
    <meta name="twitter:description" content="Create stunning Instagram stories with professional text overlays and effects">
    <meta name="twitter:image" content="https://dacostorymaker.app/images/twitter-card-1200x600.png">
    <meta name="twitter:image:alt" content="DACO Storymaker Pro Interface">
    
    <!-- Schema.org structured data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "DACO Storymaker Pro",
      "description": "Professional Instagram Story Creator with advanced text overlay features",
      "url": "https://dacostorymaker.app/",
      "applicationCategory": "DesignApplication",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "creator": {
        "@type": "Organization",
        "@id": "https://dacostorymaker.app/#organization",
        "name": "DACO Storymaker Team"
      },
      "publisher": {
        "@type": "Organization",
        "@id": "https://dacostorymaker.app/#organization"
      }
    }
    </script>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- Icons and Favicons -->
    <link rel="icon" type="image/x-icon" href="./favicon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="./icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="./icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="./icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="./icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="./icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="./icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./icons/favicon-16x16.png">
    
    <!-- Microsoft specific -->
    <meta name="msapplication-TileImage" content="./icons/ms-icon-144x144.png">
    <meta name="msapplication-config" content="./browserconfig.xml">
    
    <!-- iOS specific meta tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="DACO Storymaker">
    <meta name="apple-touch-fullscreen" content="yes">
    <link rel="apple-touch-startup-image" href="./icons/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="./icons/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="./icons/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="./icons/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="./icons/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="./icons/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    <link rel="apple-touch-startup-image" href="./icons/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://fonts.googleapis.com https://fonts.gstatic.com https://cdnjs.cloudflare.com https://unpkg.com https://cdn.jsdelivr.net; img-src 'self' data: blob: *; media-src 'self' data: blob: *; connect-src 'self' https: wss: data:; font-src 'self' data: https://fonts.gstatic.com https://fonts.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; script-src 'self' 'unsafe-inline' 'unsafe-eval'; object-src 'none'; base-uri 'self'; frame-ancestors 'none';">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload">
    <meta http-equiv="Feature-Policy" content="geolocation 'none'; microphone 'none'; camera 'none'">
    <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
    
    <!-- DNS Prefetch -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100;200;300;400;500;600;700;800;900&family=Lalezar:wght@400&family=Amiri:ital,wght@0,400;0,700;1,400;1,700&family=Markazi+Text:wght@400;500;600;700&family=Noto+Naskh+Arabic:wght@400;500;600;700&family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="./css/styles.css">
    <link rel="stylesheet" href="./css/animations.css">
    <link rel="stylesheet" href="./css/responsive.css">
    <link rel="stylesheet" href="./css/dark-mode.css">
    
    <!-- Critical CSS -->
    <style>
        /* Critical above-the-fold styles */
        body { 
            margin: 0; 
            font-family: 'Vazirmatn', -apple-system, BlinkMacSystemFont, sans-serif; 
            background: #FFFFFF;
            overflow-x: hidden;
        }
        .loading-screen { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: #5D5CDE; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            z-index: 10000; 
        }
        .loading-logo { 
            color: white; 
            font-size: 2rem; 
            font-weight: 700; 
            margin-bottom: 2rem; 
            animation: pulse 2s infinite; 
        }
        .loading-spinner { 
            width: 50px; 
            height: 50px; 
            border: 3px solid rgba(255, 255, 255, 0.3); 
            border-top: 3px solid white; 
            border-radius: 50%; 
            animation: spin 1s linear infinite; 
        }
        @keyframes spin { 
            0% { transform: rotate(0deg); } 
            100% { transform: rotate(360deg); } 
        }
        @keyframes pulse { 
            0%, 100% { opacity: 1; } 
            50% { opacity: 0.7; } 
        }
    </style>
</head>

<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-logo">DACO Storymaker Pro</div>
        <div class="loading-spinner"></div>
        <div class="loading-text">درحال بارگذاری داکو استوری میکر پرو...</div>
        <div class="loading-version">نسخه 3.0.0 • ویرایش حرفه‌ای</div>
    </div>

    <!-- Offline Alert -->
    <div class="offline-alert" id="offlineAlert" style="display: none;">
        <div class="offline-content">
            <div class="offline-icon">📡</div>
            <h3>اتصال به اینترنت قطع شده</h3>
            <p>شما در حالت آفلاین هستید. برخی ویژگی‌ها ممکن است محدود باشند.</p>
        </div>
    </div>

    <!-- Portrait Mode Alert -->
    <div class="portrait-alert" id="portraitAlert" style="display: none;">
        <div class="portrait-content">
            <div class="rotate-icon">📱</div>
            <h2>حالت عمودی مورد نیاز است</h2>
            <p>لطفاً دستگاه خود را برای تجربه بهتر به حالت عمودی بچرخانید.</p>
        </div>
    </div>

    <!-- Update Available -->
    <div class="update-banner" id="updateBanner" style="display: none;">
        <div class="update-content">
            <span>نسخه جدید موجود است!</span>
            <button onclick="updateApp()" class="update-btn">به‌روزرسانی</button>
            <button onclick="dismissUpdate()" class="dismiss-btn">×</button>
        </div>
    </div>

    <!-- Main App Container -->
    <div class="app-container" id="appContainer" style="display: none;">
        <!-- Header -->
        <header class="app-header" role="banner">
            <div class="header-content">
                <div class="header-left">
                    <button class="menu-btn" onclick="toggleSidebar()" aria-label="منوی کناری">
                        <span class="hamburger"></span>
                    </button>
                    <div class="app-info">
                        <h1 class="app-title">DACO Storymaker Pro</h1>
                        <p class="app-subtitle">پوشش هنری دیجیتال خلاقانه</p>
                    </div>
                </div>
                <div class="header-right">
                    <button class="theme-toggle" onclick="toggleTheme()" aria-label="تغییر تم">
                        <span class="theme-icon">🌙</span>
                    </button>
                    <button class="fullscreen-btn" onclick="toggleFullscreen()" aria-label="تمام صفحه">
                        <span class="fullscreen-icon">⛶</span>
                    </button>
                </div>
            </div>
            <div class="progress-bar" id="progressBar">
                <div class="progress-fill"></div>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar" role="complementary">
            <div class="sidebar-content">
                <div class="sidebar-header">
                    <h3>DACO Storymaker Pro</h3>
                    <button class="close-sidebar" onclick="closeSidebar()" aria-label="بستن منو">×</button>
                </div>
                <nav class="sidebar-nav">
                    <ul>
                        <li><a href="#home" onclick="navigateTo('home')">🏠 صفحه اصلی</a></li>
                        <li><a href="#templates" onclick="navigateTo('templates')">🎨 قالب‌ها</a></li>
                        <li><a href="#gallery" onclick="navigateTo('gallery')">🖼️ گالری</a></li>
                        <li><a href="#help" onclick="navigateTo('help')">❓ راهنما</a></li>
                        <li><a href="#settings" onclick="navigateTo('settings')">⚙️ تنظیمات</a></li>
                        <li><a href="#about" onclick="navigateTo('about')">ℹ️ درباره ما</a></li>
                    </ul>
                </nav>
                <div class="sidebar-footer">
                    <div class="social-links">
                        <a href="https://instagram.com/dacostorymaker" target="_blank" rel="noopener" aria-label="اینستاگرام">📷</a>
                        <a href="mailto:info@dacostorymaker.app" aria-label="ایمیل">📧</a>
                        <a href="https://t.me/dacostorymaker" target="_blank" rel="noopener" aria-label="تلگرام">📢</a>
                    </div>
                    <p class="version">نسخه 3.0.0</p>
                </div>
            </div>
        </aside>

        <!-- Sidebar Overlay -->
        <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>

        <!-- Main Content Area -->
        <main class="main-content" role="main">
            <!-- Canvas Container -->
            <div class="canvas-container">
                <div class="canvas-header">
                    <div class="canvas-info">
                        <span class="canvas-title">برش تصویر - فرمت کامل 9:16</span>
                        <div class="canvas-tools">
                            <button class="tool-btn" onclick="resetCanvas()" title="بازنشانی کانواس">🔄</button>
                            <button class="tool-btn" onclick="undoAction()" title="بازگشت" id="undoBtn" disabled>↶</button>
                            <button class="tool-btn" onclick="redoAction()" title="تکرار" id="redoBtn" disabled>↷</button>
                            <button class="tool-btn" onclick="centerElements()" title="وسط چین">⊞</button>
                        </div>
                    </div>
                    <div class="zoom-controls">
                        <button class="zoom-btn" onclick="zoomOut()">−</button>
                        <span class="zoom-level" id="zoomLevel">100%</span>
                        <button class="zoom-btn" onclick="zoomIn()">+</button>
                    </div>
                </div>

                <!-- Story Canvas -->
                <div class="story-canvas-wrapper">
                    <div class="story-canvas" id="storyCanvas" role="img" aria-label="کانواس استوری">
                        <div class="canvas-overlay" id="canvasOverlay">
                            <div class="drop-zone" id="dropZone">
                                <div class="drop-content">
                                    <div class="drop-icon">📷</div>
                                    <p>تصویر خود را اینجا رها کنید</p>
                                    <p class="drop-hint">یا کلیک کنید تا انتخاب کنید</p>
                                </div>
                            </div>
                        </div>
                        
                        <img class="story-image" id="storyImage" alt="تصویر پس‌زمینه استوری" style="display: none;">
                        
                        <!-- Default Text Element -->
                        <div class="text-overlay selected" id="defaultText" 
                             style="top: 50%; left: 50%; transform: translate(-50%, -50%);"
                             tabindex="0" role="textbox" aria-label="متن قابل ویرایش">
                            برای ویرایش متن کلیک کنید
                        </div>

                        <!-- Grid Lines -->
                        <div class="grid-lines" id="gridLines" style="display: none;">
                            <div class="grid-line grid-vertical" style="left: 33.33%;"></div>
                            <div class="grid-line grid-vertical" style="left: 66.66%;"></div>
                            <div class="grid-line grid-horizontal" style="top: 33.33%;"></div>
                            <div class="grid-line grid-horizontal" style="top: 66.66%;"></div>
                        </div>

                        <!-- Guidelines -->
                        <div class="guidelines" id="guidelines"></div>
                    </div>

                    <!-- Canvas Instructions -->
                    <div class="canvas-instructions">
                        <p>🤏 برای زوم قرص کنید • 👆 برای جابجایی بکشید • 🖼️ تصویر کاملاً در قاب باقی می‌ماند</p>
                    </div>
                </div>
            </div>

            <!-- Quick Actions Bar -->
            <div class="quick-actions">
                <button class="quick-action" onclick="addNewText()" title="افزودن متن جدید">
                    <span class="action-icon">✏️</span>
                    <span class="action-label">متن</span>
                </button>
                <button class="quick-action" onclick="openImagePicker()" title="افزودن تصویر">
                    <span class="action-icon">🖼️</span>
                    <span class="action-label">تصویر</span>
                </button>
                <button class="quick-action" onclick="toggleGrid()" title="نمایش خطوط راهنما">
                    <span class="action-icon">⊞</span>
                    <span class="action-label">شبکه</span>
                </button>
                <button class="quick-action" onclick="duplicateSelected()" title="کپی عنصر انتخاب شده">
                    <span class="action-icon">📋</span>
                    <span class="action-label">کپی</span>
                </button>
                <button class="quick-action" onclick="deleteSelected()" title="حذف عنصر انتخاب شده">
                    <span class="action-icon">🗑️</span>
                    <span class="action-label">حذف</span>
                </button>
            </div>
        </main>

        <!-- Controls Panel -->
        <div class="controls-panel" id="controlsPanel" role="region" aria-label="پنل کنترل‌ها">
            <div class="controls-header">
                <h3 class="controls-title">تنظیمات</h3>
                <button class="controls-toggle" onclick="toggleControls()" id="controlsToggle">−</button>
            </div>

            <div class="controls-content" id="controlsContent">
                <!-- Text Controls -->
                <div class="control-section active" id="textSection">
                    <div class="section-header">
                        <span class="section-icon">✏️</span>
                        <span class="section-title">متن</span>
                    </div>
                    
                    <div class="control-group">
                        <label for="textInput" class="control-label">محتوای متن:</label>
                        <div class="input-wrapper">
                            <textarea class="text-input" id="textInput" placeholder="متن خود را وارد کنید..." 
                                      rows="2" maxlength="500">برای ویرایش متن کلیک کنید</textarea>
                            <div class="input-actions">
                                <button onclick="addNewText()" class="input-action-btn" title="افزودن متن جدید">+</button>
                                <button onclick="clearText()" class="input-action-btn" title="پاک کردن متن">🗑️</button>
                            </div>
                        </div>
                        <div class="character-count">
                            <span id="charCount">28</span>/500 کاراکتر
                        </div>
                    </div>

                    <!-- Font Selection -->
                    <div class="control-group">
                        <label class="control-label">فونت:</label>
                        <div class="font-grid">
                            <button class="font-btn active" data-font="Vazirmatn" onclick="changeFont(this, 'Vazirmatn')">
                                <span class="font-preview" style="font-family: 'Vazirmatn'">واضح</span>
                                <span class="font-name">وزیرمتن</span>
                            </button>
                            <button class="font-btn" data-font="Lalezar" onclick="changeFont(this, 'Lalezar')">
                                <span class="font-preview" style="font-family: 'Lalezar'">لاله‌زار</span>
                                <span class="font-name">لاله‌زار</span>
                            </button>
                            <button class="font-btn" data-font="Amiri" onclick="changeFont(this, 'Amiri')">
                                <span class="font-preview" style="font-family: 'Amiri'">امیری</span>
                                <span class="font-name">امیری</span>
                            </button>
                            <button class="font-btn" data-font="Markazi Text" onclick="changeFont(this, 'Markazi Text')">
                                <span class="font-preview" style="font-family: 'Markazi Text'">مرکزی</span>
                                <span class="font-name">مرکزی</span>
                            </button>
                            <button class="font-btn" data-font="Noto Naskh Arabic" onclick="changeFont(this, 'Noto Naskh Arabic')">
                                <span class="font-preview" style="font-family: 'Noto Naskh Arabic'">نسخ</span>
                                <span class="font-name">نوتو نسخ</span>
                            </button>
                            <button class="font-btn" data-font="Inter" onclick="changeFont(this, 'Inter')">
                                <span class="font-preview" style="font-family: 'Inter'">Inter</span>
                                <span class="font-name">اینتر</span>
                            </button>
                        </div>
                    </div>

                    <!-- Text Style Controls -->
                    <div class="control-group">
                        <label class="control-label">استایل متن:</label>
                        <div class="style-buttons">
                            <button class="style-btn" onclick="toggleBold()" id="boldBtn" title="ضخیم">
                                <strong>B</strong>
                            </button>
                            <button class="style-btn" onclick="toggleItalic()" id="italicBtn" title="کج">
                                <em>I</em>
                            </button>
                            <button class="style-btn" onclick="toggleUnderline()" id="underlineBtn" title="زیرخط">
                                <u>U</u>
                            </button>
                            <button class="style-btn" onclick="toggleStrikethrough()" id="strikeBtn" title="خط روی متن">
                                <s>S</s>
                            </button>
                        </div>
                    </div>

                    <!-- Text Alignment -->
                    <div class="control-group">
                        <label class="control-label">تراز:</label>
                        <div class="align-buttons">
                            <button class="align-btn active" onclick="setTextAlign('right')" data-align="right" title="راست‌چین">
                                ⊣
                            </button>
                            <button class="align-btn" onclick="setTextAlign('center')" data-align="center" title="وسط‌چین">
                                ⊨
                            </button>
                            <button class="align-btn" onclick="setTextAlign('left')" data-align="left" title="چپ‌چین">
                                ⊢
                            </button>
                            <button class="align-btn" onclick="setTextAlign('justify')" data-align="justify" title="بلوک‌چین">
                                ⊟
                            </button>
                        </div>
                    </div>

                    <!-- Font Size -->
                    <div class="control-group">
                        <label for="sizeSlider" class="control-label">اندازه فونت:</label>
                        <div class="slider-container">
                            <button class="slider-btn" onclick="decreaseSize()">A</button>
                            <input type="range" class="slider" id="sizeSlider" min="12" max="120" value="24" 
                                   oninput="changeSize(this.value)" aria-label="اندازه فونت">
                            <button class="slider-btn large" onclick="increaseSize()">A</button>
                            <span class="slider-value" id="sizeValue">24px</span>
                        </div>
                    </div>

                    <!-- Line Height -->
                    <div class="control-group">
                        <label for="lineHeightSlider" class="control-label">فاصله خطوط:</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="lineHeightSlider" min="0.8" max="2.5" step="0.1" value="1.2" 
                                   oninput="changeLineHeight(this.value)" aria-label="فاصله خطوط">
                            <span class="slider-value" id="lineHeightValue">1.2</span>
                        </div>
                    </div>

                    <!-- Letter Spacing -->
                    <div class="control-group">
                        <label for="letterSpacingSlider" class="control-label">فاصله حروف:</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="letterSpacingSlider" min="-2" max="10" step="0.5" value="0" 
                                   oninput="changeLetterSpacing(this.value)" aria-label="فاصله حروف">
                            <span class="slider-value" id="letterSpacingValue">0px</span>
                        </div>
                    </div>
                </div>

                <!-- Color Controls -->
                <div class="control-section" id="colorSection">
                    <div class="section-header">
                        <span class="section-icon">🎨</span>
                        <span class="section-title">رنگ متن</span>
                    </div>

                    <!-- Text Color -->
                    <div class="control-group">
                        <label for="textColorPicker" class="control-label">رنگ متن:</label>
                        <div class="color-row">
                            <input type="color" class="color-picker" id="textColorPicker" value="#ffffff" 
                                   onchange="changeTextColor(this.value)" aria-label="انتخاب رنگ متن">
                            <div class="color-presets">
                                <button class="color-preset" data-color="#ffffff" style="background: #ffffff" onclick="setPresetColor('text', '#ffffff')" title="سفید"></button>
                                <button class="color-preset" data-color="#000000" style="background: #000000" onclick="setPresetColor('text', '#000000')" title="سیاه"></button>
                                <button class="color-preset" data-color="#ff0000" style="background: #ff0000" onclick="setPresetColor('text', '#ff0000')" title="قرمز"></button>
                                <button class="color-preset" data-color="#00ff00" style="background: #00ff00" onclick="setPresetColor('text', '#00ff00')" title="سبز"></button>
                                <button class="color-preset" data-color="#0000ff" style="background: #0000ff" onclick="setPresetColor('text', '#0000ff')" title="آبی"></button>
                                <button class="color-preset" data-color="#ffff00" style="background: #ffff00" onclick="setPresetColor('text', '#ffff00')" title="زرد"></button>
                                <button class="color-preset" data-color="#ff00ff" style="background: #ff00ff" onclick="setPresetColor('text', '#ff00ff')" title="بنفش"></button>
                                <button class="color-preset" data-color="#00ffff" style="background: #00ffff" onclick="setPresetColor('text', '#00ffff')" title="فیروزه‌ای"></button>
                            </div>
                        </div>
                    </div>

                    <!-- Text Opacity -->
                    <div class="control-group">
                        <label for="opacitySlider" class="control-label">شفافیت متن:</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="opacitySlider" min="0" max="100" value="100" 
                                   oninput="changeOpacity(this.value)" aria-label="شفافیت متن">
                            <span class="slider-value" id="opacityValue">100%</span>
                        </div>
                    </div>

                    <!-- Gradient Options -->
                    <div class="control-group">
                        <label class="control-label">گرادینت:</label>
                        <div class="gradient-controls">
                            <button class="gradient-btn" onclick="toggleGradient()" id="gradientToggle">🌈 فعال‌سازی گرادینت</button>
                            <div class="gradient-options" id="gradientOptions" style="display: none;">
                                <div class="gradient-presets">
                                    <button class="gradient-preset" onclick="applyGradient('linear-gradient(45deg, #ff6b6b, #4ecdc4)')" 
                                            style="background: linear-gradient(45deg, #ff6b6b, #4ecdc4)"></button>
                                    <button class="gradient-preset" onclick="applyGradient('linear-gradient(45deg, #667eea, #764ba2)')" 
                                            style="background: linear-gradient(45deg, #667eea, #764ba2)"></button>
                                    <button class="gradient-preset" onclick="applyGradient('linear-gradient(45deg, #f093fb, #f5576c)')" 
                                            style="background: linear-gradient(45deg, #f093fb, #f5576c)"></button>
                                    <button class="gradient-preset" onclick="applyGradient('linear-gradient(45deg, #4facfe, #00f2fe)')" 
                                            style="background: linear-gradient(45deg, #4facfe, #00f2fe)"></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Background Controls -->
                <div class="control-section" id="backgroundSection">
                    <div class="section-header">
                        <span class="section-icon">🎭</span>
                        <span class="section-title">پس‌زمینه متن</span>
                    </div>

                    <!-- Background Color -->
                    <div class="control-group">
                        <label for="bgColorPicker" class="control-label">رنگ پس‌زمینه:</label>
                        <div class="color-row">
                            <input type="color" class="color-picker" id="bgColorPicker" value="#000000" 
                                   onchange="changeBgColor(this.value)" aria-label="انتخاب رنگ پس‌زمینه">
                            <div class="color-presets">
                                <button class="color-preset" data-color="#000000" style="background: #000000" onclick="setPresetColor('bg', '#000000')" title="سیاه"></button>
                                <button class="color-preset" data-color="#ffffff" style="background: #ffffff" onclick="setPresetColor('bg', '#ffffff')" title="سفید"></button>
                                <button class="color-preset" data-color="#5D5CDE" style="background: #5D5CDE" onclick="setPresetColor('bg', '#5D5CDE')" title="بنفش"></button>
                                <button class="color-preset" data-color="#ff6b6b" style="background: #ff6b6b" onclick="setPresetColor('bg', '#ff6b6b')" title="قرمز روشن"></button>
                                <button class="color-preset" data-color="#4ecdc4" style="background: #4ecdc4" onclick="setPresetColor('bg', '#4ecdc4')" title="فیروزه‌ای"></button>
                                <button class="color-preset" data-color="#45b7d1" style="background: #45b7d1" onclick="setPresetColor('bg', '#45b7d1')" title="آبی"></button>
                                <button class="color-preset" data-color="#96ceb4" style="background: #96ceb4" onclick="setPresetColor('bg', '#96ceb4')" title="سبز"></button>
                                <button class="color-preset" data-color="#ffeaa7" style="background: #ffeaa7" onclick="setPresetColor('bg', '#ffeaa7')" title="زرد"></button>
                            </div>
                        </div>
                    </div>

                    <!-- Background Opacity -->
                    <div class="control-group">
                        <label for="bgOpacitySlider" class="control-label">شفافیت پس‌زمینه:</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="bgOpacitySlider" min="0" max="100" value="0" 
                                   oninput="changeBgOpacity(this.value)" aria-label="شفافیت پس‌زمینه">
                            <span class="slider-value" id="bgOpacityValue">0%</span>
                        </div>
                    </div>

                    <!-- Background Blur -->
                    <div class="control-group">
                        <label for="bgBlurSlider" class="control-label">محو کردن پس‌زمینه:</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="bgBlurSlider" min="0" max="20" value="0" 
                                   oninput="changeBgBlur(this.value)" aria-label="محو کردن پس‌زمینه">
                            <span class="slider-value" id="bgBlurValue">0px</span>
                        </div>
                    </div>

                    <!-- Border Radius -->
                    <div class="control-group">
                        <label for="borderRadiusSlider" class="control-label">گردی گوشه‌ها:</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="borderRadiusSlider" min="0" max="50" value="0" 
                                   oninput="changeBorderRadius(this.value)" aria-label="گردی گوشه‌ها">
                            <span class="slider-value" id="borderRadiusValue">0px</span>
                        </div>
                    </div>

                    <!-- Padding -->
                    <div class="control-group">
                        <label for="paddingSlider" class="control-label">فاصله داخلی:</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="paddingSlider" min="0" max="50" value="8" 
                                   oninput="changePadding(this.value)" aria-label="فاصله داخلی">
                            <span class="slider-value" id="paddingValue">8px</span>
                        </div>
                    </div>
                </div>

                <!-- Effects Controls -->
                <div class="control-section" id="effectsSection">
                    <div class="section-header">
                        <span class="section-icon">✨</span>
                        <span class="section-title">جلوه‌ها</span>
                    </div>

                    <!-- Shadow -->
                    <div class="control-group">
                        <label for="shadowSlider" class="control-label">سایه:</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="shadowSlider" min="0" max="20" value="0" 
                                   oninput="changeShadow(this.value)" aria-label="سایه متن">
                            <span class="slider-value" id="shadowValue">0px</span>
                        </div>
                    </div>

                    <!-- Shadow Color -->
                    <div class="control-group">
                        <label for="shadowColorPicker" class="control-label">رنگ سایه:</label>
                        <input type="color" class="color-picker" id="shadowColorPicker" value="#000000" 
                               onchange="changeShadowColor(this.value)" aria-label="رنگ سایه">
                    </div>

                    <!-- Stroke -->
                    <div class="control-group">
                        <label for="strokeSlider" class="control-label">حاشیه:</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="strokeSlider" min="0" max="10" value="0" 
                                   oninput="changeStroke(this.value)" aria-label="ضخامت حاشیه">
                            <span class="slider-value" id="strokeValue">0px</span>
                        </div>
                    </div>

                    <!-- Stroke Color -->
                    <div class="control-group">
                        <label for="strokeColorPicker" class="control-label">رنگ حاشیه:</label>
                        <input type="color" class="color-picker" id="strokeColorPicker" value="#000000" 
                               onchange="changeStrokeColor(this.value)" aria-label="رنگ حاشیه">
                    </div>

                    <!-- Glow Effect -->
                    <div class="control-group">
                        <label for="glowSlider" class="control-label">درخشندگی:</label>
                        <div class="slider-container">
                            <input type="range" class="slider" id="glowSlider" min="0" max="20" value="0" 
                                   oninput="changeGlow(this.value)" aria-label="شدت درخشندگی">
                            <span class="slider-value" id="glowValue">0px</span>
                        </div>
                    </div>

                    <!-- Animation Effects -->
                    <div class="control-group">
                        <label class="control-label">انیمیشن:</label>
                        <div class="animation-buttons">
                            <button class="animation-btn" onclick="applyAnimation('none')" data-animation="none">بدون</button>
                            <button class="animation-btn" onclick="applyAnimation('pulse')" data-animation="pulse">ضربان</button>
                            <button class="animation-btn" onclick="applyAnimation('bounce')" data-animation="bounce">پرش</button>
                            <button class="animation-btn" onclick="applyAnimation('shake')" data-animation="shake">لرزش</button>
                            <button class="animation-btn" onclick="applyAnimation('glow')" data-animation="glow">درخشش</button>
                            <button class="animation-btn" onclick="applyAnimation('typewriter')" data-animation="typewriter">تایپ‌رایتر</button>
                        </div>
                    </div>
                </div>

                <!-- Image Controls -->
                <div class="control-section" id="imageSection">
                    <div class="section-header">
                        <span class="section-icon">🖼️</span>
                        <span class="section-title">تصویر</span>
                    </div>

                    <!-- Image Upload -->
                    <div class="control-group">
                        <label class="control-label">آپلود تصویر:</label>
                        <div class="upload-area">
                            <button class="upload-btn" onclick="openImagePicker()">
                                <span class="upload-icon">📁</span>
                                <span>انتخاب تصویر</span>
                            </button>
                            <p class="upload-hint">فرمت‌های مجاز: JPG, PNG, GIF, WebP</p>
                        </div>
                    </div>

                    <!-- Image Filters -->
                    <div class="control-group" id="imageFilters" style="display: none;">
                        <label class="control-label">فیلترها:</label>
                        <div class="filter-buttons">
                            <button class="filter-btn active" onclick="applyFilter('none')" data-filter="none">عادی</button>
                            <button class="filter-btn" onclick="applyFilter('grayscale')" data-filter="grayscale">سیاه و سفید</button>
                            <button class="filter-btn" onclick="applyFilter('sepia')" data-filter="sepia">سپیا</button>
                            <button class="filter-btn" onclick="applyFilter('blur')" data-filter="blur">محو</button>
                            <button class="filter-btn" onclick="applyFilter('brightness')" data-filter="brightness">روشن</button>
                            <button class="filter-btn" onclick="applyFilter('contrast')" data-filter="contrast">کنتراست</button>
                            <button class="filter-btn" onclick="applyFilter('vintage')" data-filter="vintage">قدیمی</button>
                        </div>
                    </div>

                    <!-- Image Adjustments -->
                    <div class="image-adjustments" id="imageAdjustments" style="display: none;">
                        <div class="control-group">
                            <label for="brightnessSlider" class="control-label">روشنایی:</label>
                            <div class="slider-container">
                                <input type="range" class="slider" id="brightnessSlider" min="0" max="200" value="100" 
                                       oninput="adjustBrightness(this.value)" aria-label="روشنایی تصویر">
                                <span class="slider-value" id="brightnessValue">100%</span>
                            </div>
                        </div>

                        <div class="control-group">
                            <label for="contrastSlider" class="control-label">کنتراست:</label>
                            <div class="slider-container">
                                <input type="range" class="slider" id="contrastSlider" min="0" max="200" value="100" 
                                       oninput="adjustContrast(this.value)" aria-label="کنتراست تصویر">
                                <span class="slider-value" id="contrastValue">100%</span>
                            </div>
                        </div>

                        <div class="control-group">
                            <label for="saturationSlider" class="control-label">اشباع رنگ:</label>
                            <div class="slider-container">
                                <input type="range" class="slider" id="saturationSlider" min="0" max="200" value="100" 
                                       oninput="adjustSaturation(this.value)" aria-label="اشباع رنگ تصویر">
                                <span class="slider-value" id="saturationValue">100%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav" role="navigation" aria-label="ناوبری اصلی">
            <button class="nav-item active" onclick="showSection('text')" data-section="text" aria-label="کنترل‌های متن">
                <span class="nav-icon">✏️</span>
                <span class="nav-label">متن</span>
            </button>
            <button class="nav-item" onclick="showSection('color')" data-section="color" aria-label="کنترل‌های رنگ">
                <span class="nav-icon">🎨</span>
                <span class="nav-label">رنگ</span>
            </button>
            <button class="nav-item" onclick="showSection('background')" data-section="background" aria-label="کنترل‌های پس‌زمینه">
                <span class="nav-icon">🎭</span>
                <span class="nav-label">پس‌زمینه</span>
            </button>
            <button class="nav-item" onclick="showSection('effects')" data-section="effects" aria-label="جلوه‌ها">
                <span class="nav-icon">✨</span>
                <span class="nav-label">جلوه‌ها</span>
            </button>
            <button class="nav-item" onclick="showSection('image')" data-section="image" aria-label="کنترل‌های تصویر">
                <span class="nav-icon">🖼️</span>
                <span class="nav-label">تصویر</span>
            </button>
            <button class="nav-item" onclick="showExportPanel()" aria-label="گزینه‌های خروجی">
                <span class="nav-icon">📥</span>
                <span class="nav-label">خروجی</span>
            </button>
        </nav>
    </div>

    <!-- Export Panel -->
    <div class="export-panel" id="exportPanel" role="dialog" aria-labelledby="exportTitle" aria-hidden="true">
        <div class="export-header">
            <h3 id="exportTitle" class="export-title">دانلود و خروجی</h3>
            <p class="export-subtitle">گزینه خروجی مورد نظر خود را انتخاب کنید</p>
            <button class="export-close" onclick="hideExportPanel()" aria-label="بستن پنل خروجی">×</button>
        </div>

        <div class="export-options">
            <div class="export-option" onclick="exportImage('high-quality')" tabindex="0" role="button">
                <div class="export-option-icon">🎯</div>
                <div class="export-option-content">
                    <div class="export-option-title">ذخیره با کیفیت بالا</div>
                    <div class="export-option-desc">کیفیت عالی برای استوری اینستاگرام و شبکه‌های اجتماعی</div>
                    <div class="export-option-specs">1080×1920 • PNG</div>
                </div>
            </div>

            <div class="export-option" onclick="exportImage('text-only')" tabindex="0" role="button">
                <div class="export-option-icon">📝</div>
                <div class="export-option-content">
                    <div class="export-option-title">فقط متن PNG</div>
                    <div class="export-option-desc">متن با کیفیت بالا و پس‌زمینه شفاف</div>
                    <div class="export-option-specs">شفاف • PNG</div>
                </div>
            </div>

            <div class="export-option" onclick="exportImage('instagram-story')" tabindex="0" role="button">
                <div class="export-option-icon">📱</div>
                <div class="export-option-content">
                    <div class="export-option-title">استوری اینستاگرام</div>
                    <div class="export-option-desc">بهینه‌سازی شده برای استوری اینستاگرام</div>
                    <div class="export-option-specs">1080×1920 • JPG</div>
                </div>
            </div>

            <div class="export-option" onclick="exportImage('wallpaper')" tabindex="0" role="button">
                <div class="export-option-icon">🖼️</div>
                <div class="export-option-content">
                    <div class="export-option-title">والپیپر موبایل</div>
                    <div class="export-option-desc">مناسب برای تصویر زمینه گوشی</div>
                    <div class="export-option-specs">1440×2560 • PNG</div>
                </div>
            </div>

            <div class="export-option" onclick="copyToClipboard()" tabindex="0" role="button">
                <div class="export-option-icon">📋</div>
                <div class="export-option-content">
                    <div class="export-option-title">کپی در کلیپ‌بورد</div>
                    <div class="export-option-desc">کپی مستقیم تصویر برای جاگذاری سریع</div>
                    <div class="export-option-specs">کپی مستقیم</div>
                </div>
            </div>
        </div>

        <div class="export-actions">
            <button class="export-action secondary" onclick="hideExportPanel()">انصراف</button>
            <button class="export-action primary" onclick="shareToSocial()">اشتراک‌گذاری</button>
        </div>
    </div>

    <!-- Image Picker Modal -->
    <div class="modal" id="imagePickerModal" role="dialog" aria-labelledby="imagePickerTitle" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="imagePickerTitle">انتخاب تصویر</h3>
                <button class="modal-close" onclick="closeImagePicker()" aria-label="بستن">×</button>
            </div>
            <div class="modal-body">
                <div class="image-source-tabs">
                    <button class="tab-btn active" onclick="switchTab('upload')" data-tab="upload">آپلود</button>
                    <button class="tab-btn" onclick="switchTab('unsplash')" data-tab="unsplash">Unsplash</button>
                    <button class="tab-btn" onclick="switchTab('camera')" data-tab="camera">دوربین</button>
                </div>

                <div class="tab-content active" id="uploadTab">
                    <div class="upload-dropzone" id="uploadDropzone">
                        <div class="dropzone-content">
                            <div class="dropzone-icon">📁</div>
                            <h4>تصویر خود را بکشید و رها کنید</h4>
                            <p>یا کلیک کنید تا انتخاب کنید</p>
                            <input type="file" id="imageInput" accept="image/*" multiple style="display: none;">
                            <button class="upload-btn" onclick="document.getElementById('imageInput').click()">
                                انتخاب فایل
                            </button>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="unsplashTab">
                    <div class="search-container">
                        <input type="text" class="search-input" id="unsplashSearch" placeholder="جستجو در Unsplash...">
                        <button class="search-btn" onclick="searchUnsplash()">🔍</button>
                    </div>
                    <div class="unsplash-grid" id="unsplashGrid">
                        <!-- Unsplash images will be loaded here -->
                    </div>
                </div>

                <div class="tab-content" id="cameraTab">
                    <div class="camera-container">
                        <video id="cameraPreview" autoplay playsinline style="display: none;"></video>
                        <canvas id="cameraCanvas" style="display: none;"></canvas>
                        <div class="camera-placeholder">
                            <div class="camera-icon">📷</div>
                            <h4>دوربین در دسترس نیست</h4>
                            <p>متأسفانه امکان دسترسی به دوربین وجود ندارد</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal" role="dialog" aria-labelledby="settingsTitle" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="settingsTitle">تنظیمات</h3>
                <button class="modal-close" onclick="closeSettings()" aria-label="بستن">×</button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h4>ظاهر</h4>
                    <div class="setting-item">
                        <label class="setting-label">
                            <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()">
                            <span class="checkmark"></span>
                            حالت تاریک
                        </label>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">
                            <input type="checkbox" id="animationsToggle" checked onchange="toggleAnimations()">
                            <span class="checkmark"></span>
                            انیمیشن‌ها
                        </label>
                    </div>
                </div>

                <div class="settings-section">
                    <h4>عملکرد</h4>
                    <div class="setting-item">
                        <label class="setting-label">
                            <input type="checkbox" id="autoSaveToggle" checked onchange="toggleAutoSave()">
                            <span class="checkmark"></span>
                            ذخیره خودکار
                        </label>
                    </div>
                    <div class="setting-item">
                        <label class="setting-label">
                            <input type="checkbox" id="gridToggle" onchange="toggleGridSetting()">
                            <span class="checkmark"></span>
                            نمایش خطوط راهنما
                        </label>
                    </div>
                </div>

                <div class="settings-section">
                    <h4>کیفیت خروجی</h4>
                    <div class="setting-item">
                        <label for="qualitySelect">کیفیت پیش‌فرض:</label>
                        <select id="qualitySelect" onchange="setDefaultQuality()">
                            <option value="high">بالا (PNG)</option>
                            <option value="medium">متوسط (JPG 90%)</option>
                            <option value="low">پایین (JPG 70%)</option>
                        </select>
                    </div>
                </div>

                <div class="settings-section">
                    <h4>حریم خصوصی</h4>
                    <div class="setting-item">
                        <label class="setting-label">
                            <input type="checkbox" id="analyticsToggle" checked onchange="toggleAnalytics()">
                            <span class="checkmark"></span>
                            ارسال آمار استفاده
                        </label>
                    </div>
                </div>

                <div class="settings-actions">
                    <button class="settings-btn secondary" onclick="resetSettings()">بازنشانی</button>
                    <button class="settings-btn primary" onclick="closeSettings()">ذخیره</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="modal" id="helpModal" role="dialog" aria-labelledby="helpTitle" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="helpTitle">راهنما</h3>
                <button class="modal-close" onclick="closeHelp()" aria-label="بستن">×</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h4>🎯 شروع سریع</h4>
                    <ol>
                        <li>روی "تصویر" کلیک کنید و عکس خود را آپلود کنید</li>
                        <li>متن را انتخاب کنید و متن دلخواه خود را بنویسید</li>
                        <li>فونت، رنگ و اندازه را تنظیم کنید</li>
                        <li>از قسمت "خروجی" تصویر نهایی را دانلود کنید</li>
                    </ol>
                </div>

                <div class="help-section">
                    <h4>⌨️ میانبرهای کیبورد</h4>
                    <div class="shortcuts">
                        <div class="shortcut">
                            <kbd>Ctrl</kbd> + <kbd>S</kbd>
                            <span>ذخیره</span>
                        </div>
                        <div class="shortcut">
                            <kbd>Ctrl</kbd> + <kbd>Z</kbd>
                            <span>بازگشت</span>
                        </div>
                        <div class="shortcut">
                            <kbd>Ctrl</kbd> + <kbd>Y</kbd>
                            <span>تکرار</span>
                        </div>
                        <div class="shortcut">
                            <kbd>Del</kbd>
                            <span>حذف عنصر انتخاب شده</span>
                        </div>
                        <div class="shortcut">
                            <kbd>Ctrl</kbd> + <kbd>D</kbd>
                            <span>کپی عنصر</span>
                        </div>
                    </div>
                </div>

                <div class="help-section">
                    <h4>📱 نکات موبایل</h4>
                    <ul>
                        <li>🤏 برای زوم کردن تصویر دو انگشت استفاده کنید</li>
                        <li>👆 برای جابجایی متن آن را لمس کرده و بکشید</li>
                        <li>📐 خطوط راهنما کمک می‌کند متن را دقیق قرار دهید</li>
                        <li>🔄 دستگاه را عمودی نگه دارید</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h4>💡 نکات حرفه‌ای</h4>
                    <ul>
                        <li>از فونت‌های فارسی برای متن‌های فارسی استفاده کنید</li>
                        <li>کنتراست مناسب بین متن و پس‌زمینه در نظر بگیرید</li>
                        <li>اندازه متن را مناسب دستگاه موبایل تنظیم کنید</li>
                        <li>از جلوه‌های نوری برای جذاب‌تر شدن استفاده کنید</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h4>🐛 رفع مشکل</h4>
                    <p>اگر با مشکلی مواجه شدید:</p>
                    <ul>
                        <li>صفحه را تازه‌سازی کنید (F5)</li>
                        <li>کش مرورگر را پاک کنید</li>
                        <li>از آخرین نسخه مرورگر استفاده کنید</li>
                        <li>با ما تماس بگیرید: info@dacostorymaker.app</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div class="context-menu" id="contextMenu" style="display: none;">
        <div class="context-item" onclick="copyElement()">کپی</div>
        <div class="context-item" onclick="duplicateElement()">تکثیر</div>
        <div class="context-item" onclick="deleteElement()">حذف</div>
        <div class="context-separator"></div>
        <div class="context-item" onclick="bringToFront()">آوردن به جلو</div>
        <div class="context-item" onclick="sendToBack()">فرستادن به عقب</div>
    </div>

    <!-- Notification Container -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- Hidden File Inputs -->
    <input type="file" id="hiddenImageInput" accept="image/*" style="display: none;" onchange="handleImageUpload(event)">

    <!-- PWA Install Prompt -->
    <div class="install-prompt" id="installPrompt" style="display: none;">
        <div class="install-content">
            <div class="install-icon">📱</div>
            <div class="install-text">
                <h4>نصب اپلیکیشن</h4>
                <p>DACO Storymaker Pro را روی دستگاه خود نصب کنید</p>
            </div>
            <div class="install-actions">
                <button class="install-btn secondary" onclick="dismissInstall()">بعداً</button>
                <button class="install-btn primary" onclick="installApp()">نصب</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="./js/app.js"></script>
    <script src="./js/canvas.js"></script>
    <script src="./js/controls.js"></script>
    <script src="./js/export.js"></script>
    <script src="./js/gestures.js"></script>
    <script src="./js/pwa.js"></script>
    <script src="./js/utils.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    const registration = await navigator.serviceWorker.register('./sw.js');
                    console.log('SW registered:', registration);
                    
                    // Check for updates
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                showUpdateBanner();
                            }
                        });
                    });
                } catch (error) {
                    console.log('SW registration failed:', error);
                }
            });
        }
    </script>

    <!-- Analytics -->
    <script>
        // Simple analytics (privacy-friendly)
        function trackEvent(event, data = {}) {
            if (!localStorage.getItem('analytics-enabled')) return;
            
            const eventData = {
                event,
                timestamp: Date.now(),
                userAgent: navigator.userAgent,
                ...data
            };
            
            // Store locally instead of sending to external services
            const events = JSON.parse(localStorage.getItem('app-events') || '[]');
            events.push(eventData);
            
            // Keep only last 100 events
            if (events.length > 100) {
                events.splice(0, events.length - 100);
            }
            
            localStorage.setItem('app-events', JSON.stringify(events));
        }

        // Track app load
        trackEvent('app_loaded');
    </script>
</body>
</html>